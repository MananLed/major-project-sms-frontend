<div class="feedback-container">
  <h2 class="feedback-title">Feedbacks</h2>

  @if (isFetching()) {
    <app-loader></app-loader>
  } @else {

    @if (userFeedback?.data?.length === 0) {
      <p class="no-feedback">No feedbacks available</p>
    } @else {

      <div class="feedback-list">
        <div
          class="feedback-card"
          *ngFor="let feedback of userFeedback!.data"
        >
          <div class="feedback-header">
            <div class="feedback-avatar">
              <p-avatar
                label="{{ feedback.name ? feedback.name[0] : '?' }}"
                shape="circle"
              ></p-avatar>
            </div>
            <div class="feedback-meta">
              <h3 class="resident-name">{{ feedback.name }}</h3>
              <p class="flat-number">Flat No: {{ feedback.flat }}</p>
            </div>
            <div class="rating-container">
              <p-rating
                [readonly]="true"
                [ngModel]="feedback.rating"
                [stars]="5"
              ></p-rating>
              <span class="rating-value">{{ feedback.rating }}/5</span>
            </div>
          </div>

          <div class="feedback-body">
            <p class="feedback-content">
              "{{ feedback.content }}"
            </p>
          </div>

          <div class="feedback-footer">
            <div class="footer-left">
              <p class="assigned-to">
                Assigned To:
                <strong>{{ feedback.assignedto }}</strong>
              </p>
              <p class="service-type">
                Service Type: <strong>{{ feedback.servicetype | titlecase }}</strong>
              </p>
            </div>

            @if (!isResident) {
              <div class="footer-right">
                <p class="date">Date: {{ feedback.date }}</p>
                <p class="time-slot">Time Slot: {{ feedback.timeslot }}</p>
              </div>
            }
          </div>
        </div>
      </div>
    }
  }
</div>
<p-toast/>